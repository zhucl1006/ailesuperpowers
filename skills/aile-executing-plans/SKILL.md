---
name: aile-executing-plans
description: 面向团队工作流的 TDD 技能（阶段3）。在写任何实现代码前，必须先写失败测试并验证失败，再写最小实现直至通过，最后重构并复验。
---

# Aile：测试驱动开发

## 概述

加載計劃，嚴格審查，分批執行任務，報告批間審查。

**核心原則：** 帶有檢查點的批量執行，以供架構師審查。

目标不是“写了测试”，而是**用可运行证据证明行为按计划实现**，并与阶段 2 的计划（`docs/plans/{Story-Key}/analysis.md` 与 `docs/plans/{Story-Key}/plan.md` / `plan-{序号}.md`）一一对应。


## 执行流程

### 第 1 步：載入並審查計劃
1. 读取计划文件，识别 `docs/plans/{Story-Key}/` 下的 `plan.md` 与 `plan-{序号}.md`
2. 选择执行计划文件：
   - 若用户明确指定某个计划文件：按指定文件执行
   - 若未指定且存在 `plan-{序号}.md`：使用最大序号的文件（如 `plan-3.md` 优先于 `plan-2.md`）
   - 若不存在任何 `plan-{序号}.md`：使用 `plan.md`
   - 若以上文件均不存在：立即停止并请求补充计划文件
3. 批判性地审查 - 找出有关计划的任何问题或疑虑
4. 如果有疑虑：在开始之前与您的人类伙伴提出这些问题
5. 如果没有问题：创建 TodoWrite 并继续

### 步驟2：執行批次處理
**預設：前 3 個任務**

對於每個任務：
1. 標記為進行中
2. 嚴格遵循每個步驟（計劃有小步驟）
3. 按規定運行驗證
4. 標記為已完成

### 第三步：報告
批次完成後：
- 顯示已實施的內容
- 顯示驗證輸出
- 說：“準備好接受反饋。”

### 第 4 步：繼續
根據回饋：
- 如果需要，應用更改
- 執行下一批
- 重複直到完成

### 第 5 步：提交 Git 變更（需使用者明確要求）

在每批任務通過驗證且獲得回饋確認後，可執行一次提交：
- 僅當使用者明確要求「提交程式碼/提交變更」時執行 `git commit`
- 提交前檢查變更範圍，避免混入無關檔案：
  - `git status`
  - `git add <本批次相關檔案>`
  - `git status`
- 推薦提交訊息模板：`feat({Story-Key}): complete batch {n}` 或 `fix({Story-Key}): complete batch {n}`
- 提交命令示例：`git commit -m "feat({Story-Key}): complete batch {n}"`
- 未經使用者明確要求，不執行 `git push`

### 第 6 步：完成開發

所有任務完成並驗證後：
- 宣佈：“我正在使用 aile-delivery-report 技能來完成交付收尾。”
- **所需的子技能：** 使用超能力：aile-delivery-report
- 遵循該技能來驗證測試、呈現選項、執行選擇

## 何時停下來尋求幫助

**在以下情況下立即停止執行：**
- 在批次中遇到阻礙（缺少依賴性、測試失敗、指令不清楚）
- 計劃存在重大缺陷，無法啟動
- 你不明白指令
- 驗證多次失敗

**要求澄清而不是猜測。 **

## 何時重新審視之前的步驟

**在以下情況下返回審核（步驟 1）：**
- 合作夥伴根據您的反饋更新計劃
- 基本方法需要重新思考

**不要強行通過阻礙** - 停下來詢問。

## 記住
- 首先嚴格審查計劃
- 嚴格遵循計劃步驟
- 不要跳過驗證
- 計劃中提到的參考技能
- 批次之間：只需報告並等待
- 堵住就停下來，別亂猜
- 未經使用者明確同意，切勿在主/主分支上開始實施

## 一體化

**所需的工作流程技能：**
- **超級能力：aile-git-worktrees** - 必需：在開始之前設置隔離的工作區
- **超級大國：aile-writing-plans** - 創建該技能執行的計劃
- **超級大國：aile-delivery-report** - 在完成所有任務後進入交付收尾
