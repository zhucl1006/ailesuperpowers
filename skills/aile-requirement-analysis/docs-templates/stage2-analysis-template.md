# 阶段 2：分析报告（analysis.md）模板

> 目标：产出 `docs/plans/{Story-Key}/analysis.md`，作为阶段 2 输入与 AI 执行入口。

> Jira Story: {Story-Key}
> 创建日期: YYYY-MM-DD
> 分析负责人: {Name}

---

## 使用说明

- 本文件仅用于**分析报告**，不包含排期、任务状态跟踪、执行日志。
- 所有 AC 与测试用例应可直接用于 QA 验收。

---

## 1. 需求理解与分析

### 1.1 需求理解摘要

- 业务目标：
- 用户价值：
- 成功标准：

### 1.2 范围界定

- In Scope：
- Out of Scope：

### 1.3 影响与依赖

- 涉及模块/系统：
- 上下游依赖：
- 对现有能力的影响：

---

## 2. UI 设计（如适用）

- 是否涉及 UI 变更：是 / 否
- 设计输入：`design.pencil` / Figma / Jira 附件链接

### 2.1 用户路径/核心交互

| 步骤 | 用户动作 | 系统反馈 | 备注 |
|------|----------|----------|------|
| 1    |          |          |      |

### 2.2 页面与状态设计

- 页面结构：
- 状态覆盖：正常 / 加载 / 空状态 / 错误状态

> 若无 UI 变更，填写：“本 Story 无 UI 设计变更”。

---

## 3. 验收条件（AC）初稿

> 将 Jira 业务表述改写为可测试条目（可观察、可验证、有边界）。

| AC 编号 | 业务表述（原文） | 可测试验收条件（改写后） | 验证方式 |
|--------|------------------|--------------------------|----------|
| AC-01  |                  |                          |          |

---

## 4. 测试用例

| 用例编号 | 关联 AC | 场景 | 前置条件 | 操作步骤 | 预期结果 |
|----------|---------|------|----------|----------|----------|
| TC-01    | AC-01   |      |          |          |          |

---

## 5. 隐含需求清单

> 重点补齐：权限、空状态、错误状态、性能、兼容性等。

| 类别 | 隐含需求 | 触发条件/边界 | 验证方式 |
|------|----------|---------------|----------|
| 权限 |          |               |          |
| 空状态 |        |               |          |
| 错误状态 |      |               |          |
| 性能 |          |               |          |
| 兼容性 |        |               |          |

---

## 6. 风险与待澄清项

| 优先级 | 问题/风险 | 影响 | 需要谁确认 | 截止时间 |
|--------|-----------|------|------------|----------|
| P1     |           |      | PM/QA/架构师 |          |

---

## 7. AI 执行指引

- 推荐执行顺序：先 AC 与测试，再实现，最后回归。
- 开发约束：遵循 KISS / YAGNI / DRY / SOLID。
- 质量门禁：必须执行 RED-GREEN-REFACTOR（TDD）。
- 变更边界：仅修改本 Story 范围内文件，禁止无关重构。
- 人工介入点：需求不清、跨系统依赖、验收口径冲突时立即暂停并升级。

---

## 8. Jira 关联

- Story Key：{Story-Key}
- Epic / 上级需求：
- 关联链接（PRD/SAD/设计稿/测试单）：
- Jira Comment 回写内容摘要：
- 需同步的 Jira 字段：AC / 子任务 / 标签 / 状态
